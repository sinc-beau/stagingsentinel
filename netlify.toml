[build]
command = "npm run build"
publish = "out"

[build.environment]
NODE_VERSION = "20"

# Cache control for HTML pages - always revalidate
[[headers]]
for = "/*.html"

[headers.values]
Cache-Control = "public, max-age=0, must-revalidate"

# Cache control for Next.js static assets - aggressive caching
[[headers]]
for = "/_next/static/*"

[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

# Security headers for all pages
[[headers]]
for = "/*"

[headers.values]
X-Frame-Options = "SAMEORIGIN"
X-Content-Type-Options = "nosniff"
X-XSS-Protection = "1; mode=block"
Referrer-Policy = "strict-origin-when-cross-origin"
Permissions-Policy = "camera=(), microphone=(), geolocation=()"
Content-Security-Policy = "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://js.hsforms.net https://js.hs-scripts.com https://js.hs-analytics.net https://js.usemessages.com https://*.hubspot.com https://*.hs-scripts.com https://*.hs-analytics.net https://www.google.com https://www.gstatic.com https://www.recaptcha.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' data: https: blob:; font-src 'self' data: https://fonts.gstatic.com; connect-src 'self' https://api.hsforms.com https://forms.hsforms.com https://forms.hubspot.com https://*.hubspot.com https://*.hubspotfeedback.com https://*.hs-sites.com https://*.hs-analytics.net https://formspree.io https://*.supabase.co https://mftrlkfegbfnkukyszoj.supabase.co wss://mftrlkfegbfnkukyszoj.supabase.co; form-action 'self' https://forms.hsforms.com https://forms.hubspot.com https://api.hsforms.com https://*.hubspot.com; frame-src 'self' https://www.google.com https://www.recaptcha.net https://app.hubspot.com https://forms.hsforms.com https://share.hsforms.com https://*.hubspot.com; media-src 'self' blob: data: https://45377644.fs1.hubspotusercontent-na1.net; worker-src 'self' blob:"

[[redirects]]
from = "/*"
to = "/404.html"
status = 404